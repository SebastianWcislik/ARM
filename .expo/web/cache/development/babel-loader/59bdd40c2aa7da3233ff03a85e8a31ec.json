{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"F:\\\\VSCodeProjects\\\\ARM\\\\Views\\\\ARMChangePassword.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { vh } from \"react-native-viewport-units-fix\";\nimport { getToken } from \"../API/token\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nvar serwerAdress = \"https://arm-dev.herokuapp.com\";\n\nvar dismissKeyboard = function dismissKeyboard() {\n  if (Platform.OS != \"web\") {\n    Keyboard.dismiss();\n  }\n};\n\nexport default function ARMChangePassword(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      loggedUser = _useState2[0],\n      setLoggedUser = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userEmail = _useState4[0],\n      setUserEmail = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shouldShow = _useState6[0],\n      setShouldShow = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errMessage = _useState8[0],\n      setErrMessage = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      newPassword = _useState10[0],\n      setNewPassword = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      oldPassword = _useState12[0],\n      setOldPassword = _useState12[1];\n\n  var GetLoggedUser = function GetLoggedUser() {\n    getToken().then(function (res) {\n      setLoggedUser(res);\n      fetch(serwerAdress + \"/getUserInfo/\" + \"'\" + res + \"'\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setUserEmail(json.Email);\n      });\n    });\n  };\n\n  var GetUserPassword = function GetUserPassword() {\n    setErrMessage(\"\");\n    fetch(serwerAdress + \"/getPassword/\" + \"'\" + userEmail + \"'\" + \"/\" + \"'\" + oldPassword + \"'\").then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json[0].result == 0) {\n        setErrMessage(\"Podano złe hasło\");\n        setOldPassword(\"\");\n      }\n\n      if (json[0].result == 1) {\n        setShouldShow(!shouldShow);\n      }\n    });\n  };\n\n  var SetUserPassword = function SetUserPassword() {\n    setErrMessage(\"\");\n    fetch(serwerAdress + \"/setPassword/\" + \"'\" + userEmail + \"'\" + \"/\" + \"'\" + newPassword + \"'\").then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json[0].result == 0) {\n        setErrMessage(\"Coś poszło nie tak, spróbuj ponownie\");\n      }\n\n      if (json[0].result == 1) {\n        setShouldShow(!shouldShow);\n        setNewPassword(\"\");\n        setOldPassword(\"\");\n        setErrMessage(\"Udało się zmienić hasło\");\n      }\n    });\n  };\n\n  useEffect(function () {\n    GetLoggedUser();\n  }, []);\n  return React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return dismissKeyboard();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, React.createElement(SafeAreaView, {\n    style: styles.body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.loggedUserStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"Zalogowany jako, \", loggedUser ? loggedUser : null), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, \"Zmiana has\\u0142a\"), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, shouldShow ? React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, React.createElement(TextInput, {\n    secureTextEntry: true,\n    style: myProfile.newPasswordText,\n    placeholder: \"Podaj stare has\\u0142o\",\n    value: oldPassword,\n    onChangeText: function onChangeText(val) {\n      return setOldPassword(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    onPress: GetUserPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"Zmie\\u0144 has\\u0142o\"))) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, React.createElement(TextInput, {\n    secureTextEntry: true,\n    style: myProfile.newPasswordText,\n    placeholder: \"Podaj nowe has\\u0142o\",\n    value: newPassword,\n    onChangeText: function onChangeText(val) {\n      return setNewPassword(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    onPress: SetUserPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"Zmie\\u0144 has\\u0142o\"))), errMessage ? React.createElement(View, {\n    style: styles.errMessageStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: styles.errMessageColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, errMessage)) : null, React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    onPress: function onPress() {\n      return navigation.navigate(\"Mój profil\", {\n        name: \"Mój profil\"\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, \"Powr\\xF3t do mojego profilu\"))))));\n}\nvar styles = StyleSheet.create({\n  body: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"dodgerblue\"\n  },\n  title: {\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    fontSize: 2.5 * vh,\n    fontWeight: \"bold\",\n    marginBottom: \"5%\",\n    marginTop: \"5%\"\n  },\n  users: {\n    alignItems: \"center\",\n    fontSize: 2.3 * vh,\n    marginTop: 20\n  },\n  errMessageStyle: {\n    padding: 10,\n    position: \"relative\",\n    width: 200\n  },\n  errMessageColor: {\n    color: \"orange\"\n  },\n  loggedUserStyle: {\n    position: \"absolute\",\n    top: 20,\n    left: 0,\n    fontSize: 1.5 * vh\n  }\n});\nvar navigationStyle = StyleSheet.create({\n  navigationButton: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 1 * vh,\n    backgroundColor: \"#0064C8\",\n    marginTop: 10,\n    borderRadius: 5\n  },\n  navigationButtonText: {\n    alignItems: \"center\",\n    fontSize: 2 * vh,\n    color: \"white\"\n  }\n});\nvar myProfile = StyleSheet.create({\n  newPasswordText: {\n    height: 5 * vh,\n    width: \"95%\",\n    margin: 5,\n    marginTop: 15,\n    marginBottom: 5\n  }\n});","map":{"version":3,"sources":["F:/VSCodeProjects/ARM/Views/ARMChangePassword.js"],"names":["React","useEffect","useState","vh","getToken","serwerAdress","dismissKeyboard","Platform","OS","Keyboard","dismiss","ARMChangePassword","navigation","loggedUser","setLoggedUser","userEmail","setUserEmail","shouldShow","setShouldShow","errMessage","setErrMessage","newPassword","setNewPassword","oldPassword","setOldPassword","GetLoggedUser","then","res","fetch","response","json","Email","GetUserPassword","result","SetUserPassword","styles","body","loggedUserStyle","title","myProfile","newPasswordText","val","navigationStyle","navigationButton","navigationButtonText","errMessageStyle","errMessageColor","navigate","name","StyleSheet","create","flex","flexDirection","alignItems","justifyContent","backgroundColor","marginLeft","marginRight","fontSize","fontWeight","marginBottom","marginTop","users","padding","position","width","color","top","left","borderRadius","height","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { vh } from \"react-native-viewport-units-fix\";\r\nimport { getToken } from \"../API/token\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  SafeAreaView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  TouchableWithoutFeedback,\r\n} from \"react-native\";\r\n\r\nconst serwerAdress = \"https://arm-dev.herokuapp.com\"; // API\r\n\r\nconst dismissKeyboard = () => {\r\n  if (Platform.OS != \"web\") {\r\n    Keyboard.dismiss();\r\n  }\r\n};\r\n\r\nexport default function ARMChangePassword({ navigation }) {\r\n  const [loggedUser, setLoggedUser] = useState(\"\");\r\n\r\n  const [userEmail, setUserEmail] = useState(\"\");\r\n\r\n  const [shouldShow, setShouldShow] = useState(true);\r\n  const [errMessage, setErrMessage] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n\r\n  const GetLoggedUser = () => {\r\n    getToken().then((res) => {\r\n      setLoggedUser(res);\r\n      fetch(serwerAdress + \"/getUserInfo/\" + \"'\" + res + \"'\")\r\n        .then((response) => response.json())\r\n        .then((json) => {\r\n          setUserEmail(json.Email);\r\n        });\r\n    });\r\n  };\r\n\r\n  const GetUserPassword = () => {\r\n    setErrMessage(\"\");\r\n\r\n    fetch(\r\n      serwerAdress +\r\n        \"/getPassword/\" +\r\n        \"'\" +\r\n        userEmail +\r\n        \"'\" +\r\n        \"/\" +\r\n        \"'\" +\r\n        oldPassword +\r\n        \"'\"\r\n    )\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        if (json[0].result == 0) {\r\n          setErrMessage(\"Podano złe hasło\");\r\n          setOldPassword(\"\");\r\n        }\r\n\r\n        if (json[0].result == 1) {\r\n          setShouldShow(!shouldShow);\r\n        }\r\n      });\r\n  };\r\n\r\n  const SetUserPassword = () => {\r\n    setErrMessage(\"\");\r\n\r\n    fetch(\r\n      serwerAdress +\r\n        \"/setPassword/\" +\r\n        \"'\" +\r\n        userEmail +\r\n        \"'\" +\r\n        \"/\" +\r\n        \"'\" +\r\n        newPassword +\r\n        \"'\"\r\n    )\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        if (json[0].result == 0) {\r\n          setErrMessage(\"Coś poszło nie tak, spróbuj ponownie\");\r\n        }\r\n\r\n        if (json[0].result == 1) {\r\n          setShouldShow(!shouldShow);\r\n          setNewPassword(\"\");\r\n          setOldPassword(\"\");\r\n          setErrMessage(\"Udało się zmienić hasło\");\r\n        }\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    GetLoggedUser();\r\n  }, []);\r\n\r\n  return (\r\n    <TouchableWithoutFeedback onPress={() => dismissKeyboard()}>\r\n      <SafeAreaView style={styles.body}>\r\n        <Text style={styles.loggedUserStyle}>\r\n          Zalogowany jako, {loggedUser ? loggedUser : null}\r\n        </Text>\r\n        <View>\r\n          <Text style={styles.title}>Zmiana hasła</Text>\r\n          <View>\r\n            {shouldShow ? (\r\n              <View>\r\n                <TextInput\r\n                  secureTextEntry={true}\r\n                  style={myProfile.newPasswordText}\r\n                  placeholder=\"Podaj stare hasło\"\r\n                  value={oldPassword}\r\n                  onChangeText={(val) => setOldPassword(val)}\r\n                />\r\n                <TouchableOpacity\r\n                  style={navigationStyle.navigationButton}\r\n                  onPress={GetUserPassword}\r\n                >\r\n                  <Text style={navigationStyle.navigationButtonText}>\r\n                    Zmień hasło\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            ) : (\r\n              <View>\r\n                <TextInput\r\n                  secureTextEntry={true}\r\n                  style={myProfile.newPasswordText}\r\n                  placeholder=\"Podaj nowe hasło\"\r\n                  value={newPassword}\r\n                  onChangeText={(val) => setNewPassword(val)}\r\n                />\r\n                <TouchableOpacity\r\n                  style={navigationStyle.navigationButton}\r\n                  onPress={SetUserPassword}\r\n                >\r\n                  <Text style={navigationStyle.navigationButtonText}>\r\n                    Zmień hasło\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n            {errMessage ? (\r\n              <View style={styles.errMessageStyle}>\r\n                <Text style={styles.errMessageColor}>{errMessage}</Text>\r\n              </View>\r\n            ) : null}\r\n            <TouchableOpacity\r\n              style={navigationStyle.navigationButton}\r\n              onPress={() =>\r\n                navigation.navigate(\"Mój profil\", { name: \"Mój profil\" })\r\n              }\r\n            >\r\n              <Text style={navigationStyle.navigationButtonText}>\r\n                Powrót do mojego profilu\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </SafeAreaView>\r\n    </TouchableWithoutFeedback>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  body: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"dodgerblue\",\r\n  },\r\n  title: {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    fontSize: 2.5 * vh,\r\n    fontWeight: \"bold\",\r\n    marginBottom: \"5%\",\r\n    marginTop: \"5%\",\r\n  },\r\n  users: {\r\n    alignItems: \"center\",\r\n    fontSize: 2.3 * vh,\r\n    marginTop: 20,\r\n  },\r\n  errMessageStyle: {\r\n    padding: 10,\r\n    position: \"relative\",\r\n    width: 200,\r\n  },\r\n  errMessageColor: {\r\n    color: \"orange\",\r\n  },\r\n  loggedUserStyle: {\r\n    position: \"absolute\",\r\n    top: 20,\r\n    left: 0,\r\n    fontSize: 1.5 * vh,\r\n  },\r\n});\r\n\r\nconst navigationStyle = StyleSheet.create({\r\n  navigationButton: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    padding: 1 * vh,\r\n    backgroundColor: \"#0064C8\",\r\n    marginTop: 10,\r\n    borderRadius: 5,\r\n  },\r\n  navigationButtonText: {\r\n    alignItems: \"center\",\r\n    fontSize: 2 * vh,\r\n    color: \"white\",\r\n  },\r\n});\r\n\r\nconst myProfile = StyleSheet.create({\r\n  newPasswordText: {\r\n    height: 5 * vh,\r\n    width: \"95%\",\r\n    margin: 5,\r\n    marginTop: 15,\r\n    marginBottom: 5,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}