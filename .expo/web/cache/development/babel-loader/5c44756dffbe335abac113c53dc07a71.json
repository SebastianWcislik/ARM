{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"F:\\\\VSCodeProjects\\\\ARM\\\\Views\\\\ARMUserRegistration.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { vh } from \"react-native-viewport-units-fix\";\nimport { getToken } from \"../API/token\";\nimport { Picker } from \"@react-native-picker/picker\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nvar serwerAdress = \"https://arm-dev.herokuapp.com\";\n\nvar dismissKeyboard = function dismissKeyboard() {\n  if (Platform.OS != \"web\") {\n    Keyboard.dismiss();\n  }\n};\n\nexport default function ARMUserRegistration(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      loggedUser = _useState2[0],\n      setLoggedUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      shouldShow = _useState4[0],\n      setShouldShow = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shouldDisable = _useState6[0],\n      setShouldDisable = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errMessage = _useState8[0],\n      setErrMessage = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      emailErrMessage = _useState10[0],\n      setEmailErrMessage = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      password = _useState12[0],\n      setPassword = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      email = _useState14[0],\n      setEmail = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      name = _useState16[0],\n      setName = _useState16[1];\n\n  var _useState17 = useState(1),\n      _useState18 = _slicedToArray(_useState17, 2),\n      role = _useState18[0],\n      setRole = _useState18[1];\n\n  var GetLoggedUser = function GetLoggedUser() {\n    getToken().then(function (res) {\n      setLoggedUser(res);\n    });\n  };\n\n  var validateEmail = function validateEmail(email) {\n    setEmailErrMessage(\"\");\n    setEmail(email);\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    var result = re.test(email);\n\n    if (result == false) {\n      setEmailErrMessage(\"Wpisano niepoprawny email\");\n      setShouldDisable(true);\n    }\n\n    if (result == true) {\n      setEmailErrMessage(\"\");\n      setErrMessage(\"\");\n      setShouldDisable(false);\n    }\n  };\n\n  var IsThereUser = function IsThereUser() {\n    fetch(serwerAdress + \"/isThereUser/\" + \"'\" + email + \"'\").then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json[0].result == 1) setErrMessage(\"Podany email już istnieje\");\n\n      if (json[0].result == 0) {\n        setErrMessage(\"\");\n        setShouldShow(!shouldShow);\n      }\n    });\n  };\n\n  var CreateUser = function CreateUser() {\n    fetch(serwerAdress + \"/createUser/\" + \"'\" + email + \"'\" + \"/\" + \"'\" + name + \"'\" + \"/\" + \"'\" + password + \"'\" + \"/\" + \"'\" + role + \"'\").then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json[0].result == 0) setErrMessage(\"Wystąpił błąd w trakcie tworzenia użytkownika, spróbuj ponownie\");\n\n      if (json[0].result == 1) {\n        setErrMessage(\"Udało się utworzyć nowego użytkownika\");\n        setPassword(\"\");\n        setEmail(\"\");\n        setName(\"\");\n        setRole(1);\n        setShouldDisable(!shouldDisable);\n        setShouldShow(!shouldShow);\n        sendRegistrationEmail();\n      }\n    });\n  };\n\n  var sendRegistrationEmail = function sendRegistrationEmail() {\n    fetch(serwerAdress + \"/sendMail/\" + password + \"/\" + email);\n  };\n\n  useEffect(function () {\n    GetLoggedUser();\n  }, []);\n  return React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return dismissKeyboard();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, React.createElement(SafeAreaView, {\n    style: styles.body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.loggedUserStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"Zalogowany jako, \", loggedUser ? loggedUser : null), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, \"Rejestracja nowego u\\u017Cytkownika\"), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, shouldShow ? React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, React.createElement(TextInput, {\n    style: myProfile.registrationText,\n    placeholder: \"Podaj email\",\n    value: email,\n    onChangeText: function onChangeText(val) {\n      return validateEmail(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }), emailErrMessage ? React.createElement(View, {\n    style: styles.errMessageStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: styles.errMessageColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, emailErrMessage)) : null, React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    disabled: shouldDisable,\n    onPress: IsThereUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, \"Zarejestruj\"))) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, React.createElement(TextInput, {\n    style: myProfile.registrationText,\n    placeholder: \"Podaj email\",\n    value: email,\n    editable: shouldShow,\n    onChangeText: function onChangeText(val) {\n      return setEmail(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    style: myProfile.registrationText,\n    placeholder: \"Podaj Imi\\u0119 u\\u017Cytkownika\",\n    value: name,\n    onChangeText: function onChangeText(val) {\n      return setName(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    secureTextEntry: true,\n    style: myProfile.registrationText,\n    placeholder: \"Podaj tymczasowe has\\u0142o\",\n    value: password,\n    onChangeText: function onChangeText(val) {\n      return setPassword(val);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker, {\n    selectedValue: role,\n    style: myProfile.statePicker,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return setRole(itemValue);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, React.createElement(Picker.Item, {\n    label: \"Admin\",\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Koordynator\",\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"U\\u017Cytkownik\",\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    onPress: CreateUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 19\n    }\n  }, \"Zarejestruj\"))), errMessage ? React.createElement(View, {\n    style: styles.errMessageStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: styles.errMessageColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, errMessage)) : null, React.createElement(TouchableOpacity, {\n    style: navigationStyle.navigationButton,\n    onPress: function onPress() {\n      return navigation.navigate(\"Mój profil\", {\n        name: \"Mój profil\"\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: navigationStyle.navigationButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, \"Powr\\xF3t do mojego profilu\"))))));\n}\nvar styles = StyleSheet.create({\n  body: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"dodgerblue\"\n  },\n  title: {\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    fontSize: 2.5 * vh,\n    fontWeight: \"bold\",\n    marginBottom: \"5%\",\n    marginTop: \"5%\"\n  },\n  users: {\n    alignItems: \"center\",\n    fontSize: 2.3 * vh,\n    marginTop: 20\n  },\n  errMessageStyle: {\n    padding: 10,\n    position: \"relative\",\n    width: 200\n  },\n  errMessageColor: {\n    color: \"orange\"\n  },\n  loggedUserStyle: {\n    position: \"absolute\",\n    top: 20,\n    left: 0,\n    fontSize: 1.5 * vh\n  }\n});\nvar navigationStyle = StyleSheet.create({\n  navigationButton: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 1 * vh,\n    backgroundColor: \"#0064C8\",\n    marginTop: 10,\n    borderRadius: 5\n  },\n  navigationButtonText: {\n    alignItems: \"center\",\n    fontSize: 2 * vh,\n    color: \"white\"\n  }\n});\nvar myProfile = StyleSheet.create({\n  statePicker: {\n    backgroundColor: \"dodgerblue\"\n  },\n  registrationText: {\n    width: \"95%\",\n    marginTop: 10,\n    marginBottom: 5\n  }\n});","map":{"version":3,"sources":["F:/VSCodeProjects/ARM/Views/ARMUserRegistration.js"],"names":["React","useEffect","useState","vh","getToken","Picker","serwerAdress","dismissKeyboard","Platform","OS","Keyboard","dismiss","ARMUserRegistration","navigation","loggedUser","setLoggedUser","shouldShow","setShouldShow","shouldDisable","setShouldDisable","errMessage","setErrMessage","emailErrMessage","setEmailErrMessage","password","setPassword","email","setEmail","name","setName","role","setRole","GetLoggedUser","then","res","validateEmail","re","result","test","IsThereUser","fetch","response","json","CreateUser","sendRegistrationEmail","styles","body","loggedUserStyle","title","myProfile","registrationText","val","errMessageStyle","errMessageColor","navigationStyle","navigationButton","navigationButtonText","statePicker","itemValue","itemIndex","navigate","StyleSheet","create","flex","flexDirection","alignItems","justifyContent","backgroundColor","marginLeft","marginRight","fontSize","fontWeight","marginBottom","marginTop","users","padding","position","width","color","top","left","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { vh } from \"react-native-viewport-units-fix\";\r\nimport { getToken } from \"../API/token\";\r\nimport { Picker } from \"@react-native-picker/picker\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  SafeAreaView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Keyboard,\r\n  TouchableWithoutFeedback,\r\n  Platform,\r\n} from \"react-native\";\r\n\r\nconst serwerAdress = \"https://arm-dev.herokuapp.com\"; // API\r\n\r\nconst dismissKeyboard = () => {\r\n  if (Platform.OS != \"web\") {\r\n    Keyboard.dismiss();\r\n  }\r\n};\r\n\r\nexport default function ARMUserRegistration({ navigation }) {\r\n  const [loggedUser, setLoggedUser] = useState(\"\");\r\n\r\n  const [shouldShow, setShouldShow] = useState(true);\r\n  const [shouldDisable, setShouldDisable] = useState(true);\r\n  const [errMessage, setErrMessage] = useState(\"\");\r\n  const [emailErrMessage, setEmailErrMessage] = useState(\"\");\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [role, setRole] = useState(1);\r\n\r\n  const GetLoggedUser = () => {\r\n    getToken().then((res) => {\r\n      setLoggedUser(res);\r\n    });\r\n  };\r\n\r\n  const validateEmail = (email) => {\r\n    setEmailErrMessage(\"\");\r\n    setEmail(email);\r\n    var re =\r\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    var result = re.test(email);\r\n    if (result == false) {\r\n      setEmailErrMessage(\"Wpisano niepoprawny email\");\r\n      setShouldDisable(true);\r\n    }\r\n\r\n    if (result == true) {\r\n      setEmailErrMessage(\"\");\r\n      setErrMessage(\"\");\r\n      setShouldDisable(false);\r\n    }\r\n  };\r\n\r\n  const IsThereUser = () => {\r\n    fetch(serwerAdress + \"/isThereUser/\" + \"'\" + email + \"'\")\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        if (json[0].result == 1) setErrMessage(\"Podany email już istnieje\");\r\n\r\n        if (json[0].result == 0) {\r\n          setErrMessage(\"\");\r\n          setShouldShow(!shouldShow);\r\n        }\r\n      });\r\n  };\r\n\r\n  const CreateUser = () => {\r\n    fetch(\r\n      serwerAdress +\r\n        \"/createUser/\" +\r\n        \"'\" +\r\n        email +\r\n        \"'\" +\r\n        \"/\" +\r\n        \"'\" +\r\n        name +\r\n        \"'\" +\r\n        \"/\" +\r\n        \"'\" +\r\n        password +\r\n        \"'\" +\r\n        \"/\" +\r\n        \"'\" +\r\n        role +\r\n        \"'\"\r\n    )\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        if (json[0].result == 0)\r\n          setErrMessage(\r\n            \"Wystąpił błąd w trakcie tworzenia użytkownika, spróbuj ponownie\"\r\n          );\r\n\r\n        if (json[0].result == 1) {\r\n          setErrMessage(\"Udało się utworzyć nowego użytkownika\");\r\n          setPassword(\"\");\r\n          setEmail(\"\");\r\n          setName(\"\");\r\n          setRole(1);\r\n          setShouldDisable(!shouldDisable);\r\n          setShouldShow(!shouldShow);\r\n          sendRegistrationEmail();\r\n        }\r\n      });\r\n  };\r\n\r\n  const sendRegistrationEmail = () => {\r\n    fetch(serwerAdress + \"/sendMail/\" + password + \"/\" + email);\r\n  };\r\n\r\n  useEffect(() => {\r\n    GetLoggedUser();\r\n  }, []);\r\n\r\n  return (\r\n    <TouchableWithoutFeedback onPress={() => dismissKeyboard()}>\r\n      <SafeAreaView style={styles.body}>\r\n        <Text style={styles.loggedUserStyle}>\r\n          Zalogowany jako, {loggedUser ? loggedUser : null}\r\n        </Text>\r\n        <View>\r\n          <Text style={styles.title}>Rejestracja nowego użytkownika</Text>\r\n          <View>\r\n            {shouldShow ? (\r\n              <View>\r\n                <TextInput\r\n                  style={myProfile.registrationText}\r\n                  placeholder=\"Podaj email\"\r\n                  value={email}\r\n                  onChangeText={(val) => validateEmail(val)}\r\n                />\r\n                {emailErrMessage ? (\r\n                  <View style={styles.errMessageStyle}>\r\n                    <Text style={styles.errMessageColor}>\r\n                      {emailErrMessage}\r\n                    </Text>\r\n                  </View>\r\n                ) : null}\r\n                <TouchableOpacity\r\n                  style={navigationStyle.navigationButton}\r\n                  disabled={shouldDisable}\r\n                  onPress={IsThereUser}\r\n                >\r\n                  <Text style={navigationStyle.navigationButtonText}>\r\n                    Zarejestruj\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            ) : (\r\n              <View>\r\n                <TextInput\r\n                  style={myProfile.registrationText}\r\n                  placeholder=\"Podaj email\"\r\n                  value={email}\r\n                  editable={shouldShow}\r\n                  onChangeText={(val) => setEmail(val)}\r\n                />\r\n                <TextInput\r\n                  style={myProfile.registrationText}\r\n                  placeholder=\"Podaj Imię użytkownika\"\r\n                  value={name}\r\n                  onChangeText={(val) => setName(val)}\r\n                />\r\n                <TextInput\r\n                  secureTextEntry={true}\r\n                  style={myProfile.registrationText}\r\n                  placeholder=\"Podaj tymczasowe hasło\"\r\n                  value={password}\r\n                  onChangeText={(val) => setPassword(val)}\r\n                />\r\n                <Picker\r\n                  selectedValue={role}\r\n                  style={myProfile.statePicker}\r\n                  onValueChange={(itemValue, itemIndex) => setRole(itemValue)}\r\n                >\r\n                  <Picker.Item label=\"Admin\" value=\"1\" />\r\n                  <Picker.Item label=\"Koordynator\" value=\"2\" />\r\n                  <Picker.Item label=\"Użytkownik\" value=\"3\" />\r\n                </Picker>\r\n                <TouchableOpacity\r\n                  style={navigationStyle.navigationButton}\r\n                  onPress={CreateUser}\r\n                >\r\n                  <Text style={navigationStyle.navigationButtonText}>\r\n                    Zarejestruj\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n            {errMessage ? (\r\n              <View style={styles.errMessageStyle}>\r\n                <Text style={styles.errMessageColor}>{errMessage}</Text>\r\n              </View>\r\n            ) : null}\r\n            <TouchableOpacity\r\n              style={navigationStyle.navigationButton}\r\n              onPress={() =>\r\n                navigation.navigate(\"Mój profil\", { name: \"Mój profil\" })\r\n              }\r\n            >\r\n              <Text style={navigationStyle.navigationButtonText}>\r\n                Powrót do mojego profilu\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </SafeAreaView>\r\n    </TouchableWithoutFeedback>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  body: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"dodgerblue\",\r\n  },\r\n  title: {\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    fontSize: 2.5 * vh,\r\n    fontWeight: \"bold\",\r\n    marginBottom: \"5%\",\r\n    marginTop: \"5%\",\r\n  },\r\n  users: {\r\n    alignItems: \"center\",\r\n    fontSize: 2.3 * vh,\r\n    marginTop: 20,\r\n  },\r\n  errMessageStyle: {\r\n    padding: 10,\r\n    position: \"relative\",\r\n    width: 200,\r\n  },\r\n  errMessageColor: {\r\n    color: \"orange\",\r\n  },\r\n  loggedUserStyle: {\r\n    position: \"absolute\",\r\n    top: 20,\r\n    left: 0,\r\n    fontSize: 1.5 * vh,\r\n  },\r\n});\r\n\r\nconst navigationStyle = StyleSheet.create({\r\n  navigationButton: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    padding: 1 * vh,\r\n    backgroundColor: \"#0064C8\",\r\n    marginTop: 10,\r\n    borderRadius: 5,\r\n  },\r\n  navigationButtonText: {\r\n    alignItems: \"center\",\r\n    fontSize: 2 * vh,\r\n    color: \"white\",\r\n  },\r\n});\r\n\r\nconst myProfile = StyleSheet.create({\r\n  statePicker: {\r\n    backgroundColor: \"dodgerblue\",\r\n  },\r\n  registrationText: {\r\n    width: \"95%\",\r\n    marginTop: 10,\r\n    marginBottom: 5,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}